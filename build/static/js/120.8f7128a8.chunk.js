(this["webpackJsonppriv-react-datta-able-dashboard-pro"]=this["webpackJsonppriv-react-datta-able-dashboard-pro"]||[]).push([[120],{2385:function(e,a,t){"use strict";t.r(a);var c=t(727),r=t.n(c),n=t(817),s=t(26),i=t(1),l=t.n(i),d=t(696),o=t(693),u=t(697),j=t(1004),m=t(251),b=t(41),f=t.n(b),h=t(1128),p=t(10),x=t(674),O=t(2),v=t(0),g=t(238),N=function(e){var a=e.data,t=e.activeId,c=e.clicked,r=g("./".concat(a.photo)),n=["d-block"];n=a.status?[].concat(Object(p.a)(n),["text-c-green"]):[].concat(Object(p.a)(n),["text-muted"]);var s="";a.time&&(s=Object(v.jsx)("small",{className:n.join(" "),children:a.time}));var i="";return a.new&&t!==a.id&&(i=Object(v.jsx)("div",{className:"live-status",children:a.new})),Object(v.jsx)(l.a.Fragment,{children:Object(v.jsxs)(x.a,{className:t===a.id?"userlist-box active":"userlist-box",onClick:c,children:[Object(v.jsxs)(O.b,{to:"#",className:"media-left",children:[" ",Object(v.jsx)("img",{className:"media-object img-radius",src:r.default,alt:a.name}),i]}),Object(v.jsx)(x.a.Body,{children:Object(v.jsxs)("h6",{className:"chat-header",children:[a.name,s]})})]})})},y=t(238),w=function(e){var a=e.message,t=e.photo,c=e.name,r="";a.type&&(r=Object(v.jsx)(O.b,{to:"#",className:"media-left photo-table",children:Object(v.jsx)("img",{className:"media-object img-radius img-radius m-t-5",src:y("./".concat(t)).default,alt:c})}));var n=[];return n=a.type?[].concat(Object(p.a)(n),["chat-menu-content"]):[].concat(Object(p.a)(n),["chat-menu-reply text-muted"]),Object(v.jsx)(l.a.Fragment,{children:Object(v.jsxs)(x.a,{className:"media chat-messages",children:[r,Object(v.jsxs)(x.a.Body,{className:n.join(" "),children:[Object(v.jsx)("div",{className:"",children:Object(v.jsx)("p",{className:"chat-cont",children:a.msg})}),Object(v.jsx)("p",{className:"chat-time",children:a.time})]})]})})},k=function(e){var a=e.onChange;return Object(v.jsx)(l.a.Fragment,{children:Object(v.jsx)("div",{className:"h-list-header m-b-5",children:Object(v.jsxs)("div",{className:"input-group",children:[Object(v.jsx)("input",{type:"text",id:"msg-friends",className:"form-control",placeholder:"Search Friend . . .",onChange:a}),Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsx)("span",{className:"input-group-text",children:Object(v.jsx)("i",{className:"feather icon-search"})})})]})})})},C=t(234);a.default=function(){var e=Object(i.createRef)(),a=Object(i.useState)(),t=Object(s.a)(a,2),c=t[0],b=t[1],p=Object(i.useState)([]),x=Object(s.a)(p,2),O=x[0],g=x[1],y=Object(i.useState)([]),E=Object(s.a)(y,2),P=E[0],S=E[1],I=Object(i.useState)({id:6}),R=Object(s.a)(I,2),B=R[0],F=R[1],T=Object(i.useState)(""),G=Object(s.a)(T,2),H=G[0],M=G[1],q=function(){var e=Object(n.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/friend/list");case 2:a=e.sent,g(a.data.friends);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(n.a)(r.a.mark((function e(a,t){var c,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/friend/chat",{params:{id:a.id}});case 2:c=e.sent,S(c.data.messages),n=document.getElementById("main-friend-chat"),t&&(t.scrollTop=n.offsetHeight);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){q(),J(B,c)}),[B,c]);var V=O.map((function(e){return Object(v.jsx)(N,{data:e,activeId:B.id,clicked:function(){return function(e){F(e);var a=document.getElementById("main-friend-chat");c.scrollTop=a.offsetHeight}(e)}},e.id)})),D=Object(v.jsx)("div",{className:"text-center text-danger",children:"Chat Not Found"});P.filter((function(e){return D=e.messages.map((function(a,t){return Object(v.jsx)(w,{message:a,name:B.name,photo:e.friend_photo},t)})),!1}));var L=function(){var e=Object(n.a)(r.a.mark((function e(a){var t,c,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a.persist(),!(t=a.target.value)){e.next=10;break}return e.next=6,C.a.get("/api/friend/search",{params:{query:t}});case 6:c=e.sent,g(c.data.results),e.next=14;break;case 10:return e.next=12,C.a.get("/api/friend/list");case 12:n=e.sent,g(n.data.friends);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(a){return e.apply(this,arguments)}}(),_=function(){var e=Object(n.a)(r.a.mark((function e(a,t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,C.a.post("/api/friend/chat/add",{id:B.id,msg:H}).then((function(e){z(),M(""),S(e.data.messages);var a=document.getElementById("main-friend-chat");c.scrollTop=a.offsetHeight}));case 3:case"end":return e.stop()}}),e)})));return function(a,t,c){return e.apply(this,arguments)}}(),z=function(){e.current.resetValidationState(!0)};return Object(v.jsx)(l.a.Fragment,{children:Object(v.jsx)(d.a,{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(u.a,{className:"msg-card",children:Object(v.jsx)(u.a.Body,{children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(o.a,{xl:3,md:12,children:[Object(v.jsx)(k,{onChange:L}),Object(v.jsx)("div",{className:"h-list-body",children:Object(v.jsx)("div",{className:"msg-user-list scroll-div",children:Object(v.jsx)("div",{className:"main-friend-list",style:{height:"calc(100vh - 300px)"},children:Object(v.jsx)(f.a,{children:V})})})})]}),Object(v.jsxs)(o.a,{xl:9,md:12,children:[Object(v.jsx)("div",{className:"h-list-body",children:Object(v.jsx)("div",{className:"msg-user-chat scroll-div",style:{height:"calc(100vh - 340px)"},children:Object(v.jsx)(f.a,{containerRef:function(e){b(e)},children:Object(v.jsx)("div",{id:"main-friend-chat",className:"main-friend-chat",children:D})})})}),Object(v.jsx)("hr",{}),Object(v.jsx)("div",{className:"msg-form",children:Object(v.jsx)(h.ValidationForm,{ref:e,onSubmit:_,onErrorSubmit:function(e,a,t){},children:Object(v.jsx)(j.a.Row,{children:Object(v.jsx)(j.a.Group,{as:o.a,children:Object(v.jsx)(h.TextInputGroup,{name:"newMsg",id:"newMsg",placeholder:"Send message",required:!0,append:Object(v.jsx)(m.a,{type:"submit",variant:"link",className:"btn-theme btn-icon btn-msg-send",children:Object(v.jsx)("i",{className:"feather icon-play"})}),value:H,onChange:function(e){M(e.target.value)},autoComplete:"off"})})})})})]})]})})})})})})}},681:function(e,a,t){"use strict";var c=t(4),r=t(1),n=t.n(r),s=t(12),i=t.n(s);a.a=function(e){return n.a.forwardRef((function(a,t){return n.a.createElement("div",Object(c.a)({},a,{ref:t,className:i()(a.className,e)}))}))}},693:function(e,a,t){"use strict";var c=t(4),r=t(7),n=t(12),s=t.n(n),i=t(1),l=t.n(i),d=t(15),o=["bsPrefix","className","as"],u=["xl","lg","md","sm","xs"],j=l.a.forwardRef((function(e,a){var t=e.bsPrefix,n=e.className,i=e.as,j=void 0===i?"div":i,m=Object(r.a)(e,o),b=Object(d.a)(t,"col"),f=[],h=[];return u.forEach((function(e){var a,t,c,r=m[e];if(delete m[e],"object"===typeof r&&null!=r){var n=r.span;a=void 0===n||n,t=r.offset,c=r.order}else a=r;var s="xs"!==e?"-"+e:"";a&&f.push(!0===a?""+b+s:""+b+s+"-"+a),null!=c&&h.push("order"+s+"-"+c),null!=t&&h.push("offset"+s+"-"+t)})),f.length||f.push(b),l.a.createElement(j,Object(c.a)({},m,{ref:a,className:s.a.apply(void 0,[n].concat(f,h))}))}));j.displayName="Col",a.a=j},696:function(e,a,t){"use strict";var c=t(4),r=t(7),n=t(12),s=t.n(n),i=t(1),l=t.n(i),d=t(15),o=["bsPrefix","className","noGutters","as"],u=["xl","lg","md","sm","xs"],j=l.a.forwardRef((function(e,a){var t=e.bsPrefix,n=e.className,i=e.noGutters,j=e.as,m=void 0===j?"div":j,b=Object(r.a)(e,o),f=Object(d.a)(t,"row"),h=f+"-cols",p=[];return u.forEach((function(e){var a,t=b[e];delete b[e];var c="xs"!==e?"-"+e:"";null!=(a=null!=t&&"object"===typeof t?t.cols:t)&&p.push(""+h+c+"-"+a)})),l.a.createElement(m,Object(c.a)({ref:a},b,{className:s.a.apply(void 0,[n,f,i&&"no-gutters"].concat(p))}))}));j.displayName="Row",j.defaultProps={noGutters:!1},a.a=j},697:function(e,a,t){"use strict";var c=t(4),r=t(7),n=t(12),s=t.n(n),i=t(1),l=t.n(i),d=t(15),o=t(57),u=t(681),j=t(218),m=["bsPrefix","className","variant","as"],b=l.a.forwardRef((function(e,a){var t=e.bsPrefix,n=e.className,i=e.variant,o=e.as,u=void 0===o?"img":o,j=Object(r.a)(e,m),b=Object(d.a)(t,"card-img");return l.a.createElement(u,Object(c.a)({ref:a,className:s()(i?b+"-"+i:b,n)},j))}));b.displayName="CardImg",b.defaultProps={variant:null};var f=b,h=["bsPrefix","className","bg","text","border","body","children","as"],p=Object(u.a)("h5"),x=Object(u.a)("h6"),O=Object(o.a)("card-body"),v=Object(o.a)("card-title",{Component:p}),g=Object(o.a)("card-subtitle",{Component:x}),N=Object(o.a)("card-link",{Component:"a"}),y=Object(o.a)("card-text",{Component:"p"}),w=Object(o.a)("card-header"),k=Object(o.a)("card-footer"),C=Object(o.a)("card-img-overlay"),E=l.a.forwardRef((function(e,a){var t=e.bsPrefix,n=e.className,o=e.bg,u=e.text,m=e.border,b=e.body,f=e.children,p=e.as,x=void 0===p?"div":p,v=Object(r.a)(e,h),g=Object(d.a)(t,"card"),N=Object(i.useMemo)((function(){return{cardHeaderBsPrefix:g+"-header"}}),[g]);return l.a.createElement(j.a.Provider,{value:N},l.a.createElement(x,Object(c.a)({ref:a},v,{className:s()(n,g,o&&"bg-"+o,u&&"text-"+u,m&&"border-"+m)}),b?l.a.createElement(O,null,f):f))}));E.displayName="Card",E.defaultProps={body:!1},E.Img=f,E.Title=v,E.Subtitle=g,E.Body=O,E.Link=N,E.Text=y,E.Header=w,E.Footer=k,E.ImgOverlay=C;a.a=E}}]);
//# sourceMappingURL=120.8f7128a8.chunk.js.map